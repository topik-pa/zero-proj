"use strict";(self.webpackChunkzero=self.webpackChunkzero||[]).push([[728],{728:(t,e,a)=>{a.r(e),a.d(e,{users:()=>f});const r=document.getElementById("dtable"),n=r.querySelector("#pagination"),s=r.querySelector("ul"),o=r.querySelector("thead"),i=o.querySelectorAll("input");let l;const d={url:"http://localhost:8080/matches",limit:25,page:0,total:void 0,pages:void 0,start:void 0,end:void 0,filterReqDelay:800},c={filters:[],sorts:[],get(){let t="?";return t+=`page=${d.page}`,t+=`&limit=${d.limit}`,this.sorts.forEach((e=>{t+=`&sortby=${encodeURIComponent(e.sortBy)}`,t+=`&order=${e.order}`})),this.filters.forEach((e=>{t+=`&filterby=${encodeURIComponent(e.filterBy)}`,t+=`&filter=${encodeURIComponent(e.filter)}`})),t}},p=(t=undefined)=>new Date(t).toLocaleString();s.addEventListener("click",(async t=>{const e=+t.target.dataset.page;isNaN(e)||d.page===e||(d.page=e,await g())})),o.addEventListener("click",(async t=>{const e=t.target.dataset.path;if(!e)return;const a=t.target.dataset.order;t.target.dataset.order="asc"===a?"desc":"asc",c.sorts=c.sorts.filter((t=>t.sortBy!==e)),c.sorts.push({sortBy:e,order:t.target.dataset.order}),await g()}));const u=t=>{l=setTimeout((async()=>{const e=t.value,a=t.parentElement.dataset.path;c.filters=c.filters.filter((t=>t.filterBy!==a)),c.filters.push({filterBy:a,filter:e}),await g()}),d.filterReqDelay)};for(const t of i)t.addEventListener("input",(async t=>{l?(clearTimeout(l),u(t.target)):u(t.target)}));const g=async()=>{r.classList.add("loading"),await fetch(d.url+c.get()).then((t=>{if(!t.ok)throw Error(`Status: ${t.status}. ${t.statusText}`);return t.json()})).then((t=>{(t=>{const e=r.getElementsByTagName("tbody")[0];e.innerText="";for(const a of t){const t=document.createElement("tr");t.innerHTML=`\n      <td>${a.id}</td>\n      <td>${a.player1.name}</td>\n      <td>${a.player2.name}</td>\n      <td>${a.score}</td>\n      <td>${a.tournament.name}</td>\n      <td>${a.tournament.value}</td>\n      <td>${a.surface}</td>\n      <td>${p(a.createdAt)}</td>\n    `,e.appendChild(t)}})(t.matches),d.total=t.total,d.pages=Math.ceil(d.total/d.limit),d.end=d.limit*(d.page+1),d.start=d.end-d.limit+1,d.end>d.total&&(d.end=d.total,d.start=d.limit*(d.pages-1)+1)})).catch((t=>{d.total=0,d.page=-1,d.pages=0,d.start=0,d.end=0,r.classList.add("error"),console.error(t)})).finally((()=>{n.querySelector("#total").innerText=d.total,n.querySelector("#start").innerText=d.start,n.querySelector("#end").innerText=d.end,n.querySelector("#page").innerText=d.page+1,n.querySelector("#pages").innerText=d.pages,(()=>{s.innerText="";for(let t=0;t<d.pages;t++){const e=document.createElement("li");e.innerText=t+1,e.setAttribute("data-page",t),t===d.page&&e.classList.add("active"),s.appendChild(e)}})(),r.classList.remove("loading")}))},y=async()=>{await g()},f={init:async()=>{console.log("Users"),await y()}}}}]);